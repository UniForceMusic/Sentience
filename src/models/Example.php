<?php

namespace src\models;

use DateTime;
use src\models\relations\BelongsTo;
use src\models\relations\HasMany;
use src\models\relations\HasOne;
use src\models\relations\ManyToMany;

class Example extends Model
{
    protected string $table = 'examples';
    protected string $primaryKeyPropertyName = 'id';
    protected bool $primaryKeyAutoGenerated = true;
    protected array $columns = [
        'id' => 'id',
        'name' => 'name',
        'parent' => 'parent',
        'createdAt' => 'created_at',
    ];

    protected array $onSave = [
        'name' => 'strtolower'
    ];

    protected array $unique = [
        'name'
    ];

    public int $id;
    public string $name;
    public ?int $profileId;
    public ?DateTime $createdAt;

    protected function registerRelations(): void
    {
        $this->registerRelation(
            new HasOne(
                Example::class,
                'parent'
            )
        );
    }
}
